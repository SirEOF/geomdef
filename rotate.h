//////////////////////////////////////////////////////////////////////////////////
/// \file rotate.h
/// \author Grzegorz Kurek
/// \author grzesiek.kurek@gmail.com
/// \version 1.0.1
/// \date 20-01-2010
/// \brief Deklaracja klasy rotate - okna dialogowego. Plik naglowkowy.
///////////////////////////////////////////////////////////////////////////////////

#ifndef ROTATE_H
#define ROTATE_H

#include <QtGui>
#include <QDialog>

class RotateImage;

/////////////////////////////////////////////////////////////////////////
/// \namespace Ui
/// \brief Przestrzen nazw Ui
/////////////////////////////////////////////////////////////////////////
namespace Ui {
    class rotate;
}

//////////////////////////////////////////////////////////////////////////////
/// \class rotate
/// \brief Klasa oodpowiedzialna za glowne okno programu. Dziedzicy po QDialog.
//////////////////////////////////////////////////////////////////////////////
class rotate : public QDialog {
    Q_OBJECT

public:
    //////////////////////////////////////////////////////////////////////////////
    ///  Konstruktor
    /// \brief Konstruktor rotate
    /// \param img obraz przyjmowany jest jako referencja do QImage.
    /// \param parent wskaünik do rodzica typu QWidget.
    //////////////////////////////////////////////////////////////////////////////
    rotate(const QImage *img,QWidget *parent = 0);

    /////////////////////////////////////////////////////////////////////////
    /// Destruktor.
    /////////////////////////////////////////////////////////////////////////
    ~rotate();

protected:
    ////////////////////////////////////////////////////////////////////////////////
    //
    ////////////////////////////////////////////////////////////////////////////////
    void changeEvent(QEvent *e);

private:
    ////////////////////////////////////////////////////////////////////////////////
    //
    ////////////////////////////////////////////////////////////////////////////////
    Ui::rotate *ui;

    ////////////////////////////////////////////////////////////////////////////////
    //
    ////////////////////////////////////////////////////////////////////////////////
    QGraphicsScene *scene;

    ////////////////////////////////////////////////////////////////////////////////
    //
    ////////////////////////////////////////////////////////////////////////////////
    int angle;

    ////////////////////////////////////////////////////////////////////////////////
    //
    ////////////////////////////////////////////////////////////////////////////////
    RotateImage *rimg;

public slots:
    ////////////////////////////////////////////////////////////////////////////////
    /// rotateSlot
    /// \brief Metoda rotateSlot modyfikuje g≥Ûwny obrazek.
    /// \param alpha kat obrotu.
    ////////////////////////////////////////////////////////////////////////////////
    void rotateSlot(int alpha);

    ////////////////////////////////////////////////////////////////////////////////
    /// rotateOKSlot
    /// \brief Metoda rotateOKSlot zamyka okienko pomocnicze.
    ////////////////////////////////////////////////////////////////////////////////
    void rotateOKSlot();

signals:
    ////////////////////////////////////////////////////////////////////////////////
    /// CloseSignalOK
    /// \brief Sygnal CloseSignalOK jest emitowany po wcisnieciu przycisku OK.
    /// \param alpha kat obrotu.
    ////////////////////////////////////////////////////////////////////////////////
    void CloseSignalOK(int angle);

    ////////////////////////////////////////////////////////////////////////////////
    /// CloseSignalCancel
    /// \brief Sygnal CloseSignalCancel jest emitowany po wcisnieciu przycisku cancel.
    ////////////////////////////////////////////////////////////////////////////////
    void CloseSignalCancel();

private slots:
    ////////////////////////////////////////////////////////////////////////////////
    //
    ////////////////////////////////////////////////////////////////////////////////
    void on_dial_valueChanged(int value);

    ////////////////////////////////////////////////////////////////////////////////
    //
    ////////////////////////////////////////////////////////////////////////////////
    void on_pushButton_clicked();

};

#endif // ROTATE_H
