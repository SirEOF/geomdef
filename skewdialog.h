//////////////////////////////////////////////////////////////////////////////////
/// \file skewdialog.h
/// \author Grzegorz Kurek
/// \author grzesiek.kurek@gmail.com
/// \version 1.0.1
/// \date 20-01-2010
/// \brief Deklaracja klasy rotate - okna dialogowego. Plik naglowkowy.
///////////////////////////////////////////////////////////////////////////////////

#ifndef SKEWDIALOG_H
#define SKEWDIALOG_H

#include <QtGui>
#include <QDialog>

#include "Skew.h"

/////////////////////////////////////////////////////////////////////////
/// \namespace Ui
/// \brief Przestrzen nazw Ui
/////////////////////////////////////////////////////////////////////////
namespace Ui {
    class skewdialog;
}

/////////////////////////////////////////////////////////////////////////
/// \class skewdialog
/// \brief Klasa oodpowiedzialna za glowne okno programu. Dziedzicy po QMainWindow.
/////////////////////////////////////////////////////////////////////////
class skewdialog : public QDialog {
    Q_OBJECT

public:
    //////////////////////////////////////////////////////////////////////////////
    ///  skewdialog
    /// \brief Konstruktor skewdialog
    /// \param img obraz przyjmowany jest jako referencja do QImage.
    /// \param parent wskaünik do rodzica typu QWidget.
    //////////////////////////////////////////////////////////////////////////////
    skewdialog(QImage* img, QWidget *parent = 0);

    /////////////////////////////////////////////////////////////////////////
    /// Destruktor.
    /////////////////////////////////////////////////////////////////////////
    ~skewdialog();

protected:
    ////////////////////////////////////////////////////////////////////////////////
    //
    ////////////////////////////////////////////////////////////////////////////////
    void changeEvent(QEvent *e);

private:
    ////////////////////////////////////////////////////////////////////////////////
    //
    ////////////////////////////////////////////////////////////////////////////////
    Ui::skewdialog *ui;

    ////////////////////////////////////////////////////////////////////////////////
    //
    ////////////////////////////////////////////////////////////////////////////////
    QGraphicsScene *scene;

    ////////////////////////////////////////////////////////////////////////////////
    //
    ////////////////////////////////////////////////////////////////////////////////
    Skew *simg;

    ////////////////////////////////////////////////////////////////////////////////
    //
    ////////////////////////////////////////////////////////////////////////////////
    QImage tmp;

    ////////////////////////////////////////////////////////////////////////////////
    //
    ////////////////////////////////////////////////////////////////////////////////
    int angleX;

    ////////////////////////////////////////////////////////////////////////////////
    //
    ////////////////////////////////////////////////////////////////////////////////
    int angleY;

    ////////////////////////////////////////////////////////////////////////////////
    //
    ////////////////////////////////////////////////////////////////////////////////
    void clearScene();

    ////////////////////////////////////////////////////////////////////////////////
    //
    ////////////////////////////////////////////////////////////////////////////////

signals:
    ////////////////////////////////////////////////////////////////////////////////
    /// CloseSignalOK
    /// \brief Sygnal CloseSignalOK jest emitowany po wcisnieciu przycisku OK.
    /// \param angleX kat pochylenia wzdluz osi x.
    /// \param angleY kat pochylenia wzdluz osi y.
    ////////////////////////////////////////////////////////////////////////////////
    void CloseSignalOK(int angleX, int angleY);

    ////////////////////////////////////////////////////////////////////////////////
    /// CloseSignalCancel
    /// \brief Sygnal CloseSignalCancel jest emitowany po wcisnieciu przycisku cancel.
    ////////////////////////////////////////////////////////////////////////////////
    void CloseSignalCancel();

private slots:
    ////////////////////////////////////////////////////////////////////////////////
    //
    ////////////////////////////////////////////////////////////////////////////////
    void on_pushButton_clicked();

    ////////////////////////////////////////////////////////////////////////////////
    //
    ////////////////////////////////////////////////////////////////////////////////
    void on_pushButton_2_clicked();

    ////////////////////////////////////////////////////////////////////////////////
    //
    ////////////////////////////////////////////////////////////////////////////////
    void on_dial_2_valueChanged(int value);

    ////////////////////////////////////////////////////////////////////////////////
    //
    ////////////////////////////////////////////////////////////////////////////////
    void on_dial_valueChanged(int value);
};

#endif // SKEWDIALOG_H
